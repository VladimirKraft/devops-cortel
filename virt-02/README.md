# Системы управления виртуализацией 

1. Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

    Сценарии:

    1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.

    2. Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов) инфраструктуры Linux и Windows виртуальных машин.

    3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.

    4. Необходимо рабочее окружение для тестирование программного продукта на нескольких дистрибутивах Linux.

    Ответ: 

    1. VMWARE или Hyper-V обладают необходимым функционалом. Учитывая преимущественность Windows based инфраструктуры возможно Hyper-V подойдет больше из-за совместимости с ней.

    2. Решение на базе KVM позволит управлять гостевыми ОС Windows, Linux, BSD, без особых потерь в производительности.

    3. Microsoft Hyper-V Server имеет наибольшую совместимость с Windows системами.

    4. Наибольшую скорость развёртывания в данном случае могут обеспечить решения виртуализации уровне ОС по типу Docker.


2. Опишите сценарий миграции с VMware vSphere на Hyper-V для Linux и Windows виртуальных машин. Детально опишите необходимые шаги для использования всех преимуществ Hyper-V для Windows.

    Сначала нужно удалить VMware Tools.

    ```bash
    vmware-uninstall-tools.pl
    ```

    После этого смотрим в свойствах машины как точно называется файл диска, поскольку у  VMware Workstation диск - это не один файл, а целая куча файлов и качаем утилиту V2V Converter. Для скачивания потребуется создать учетную запись и подтвердить e-mail, после чего приходит письмо со ссылкой для скачивания.

    Далее выключаем машину, указываем файл диска VM, формат создаваемого файла - MS Virtual PC growable image, место назначения файла и его название. Время конвертирования файла зависит от размера файла жесткого диска, а скорость конвертации составляет где-то 10-12MB/s, у меня по крайней мере было так - 
    то есть довольно долго (для машины с диском 300Gb+).

    Затем копируем получившийся файл vhd, кстати, размер его получился где-то на 5% меньше чем изначальный суммарный vmdk, на хост Hyper-V и создаём там машину 1 поколения со схожими параметрами, нелишним будет указать MAC со старой машины. В процессе создания машины указываем получившийся диск.


3. Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был бы выбор, то создавали ли вы бы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.


   Возможные проблемы и недостатки гетерогенной среды виртуализации:
    - сложность администрирования;
    - необходимое наличие высококвалифицированных специалистов;
    - повышенный риск отказа и недоступности;
    - завышенная стоимость обслуживания;

    Действия для минимизации рисков и проблем:
    - если гетерогенность не оправдана, то рассмотреть возможность отказа от нее;
    - максимальное автоматизировать развертывание и тестирование инфраструктуры, чтобы она была единая.

    Я бы предпочел работать в единой среде. Небольшие выгоды в цене и производительности при использовании разных ведут к большим издержкам и не всегда оправданы.

    